<div class="headers">
    <h2>Sign up</h2>
</div>

<section class="formContainer">
    <form class="form-horizontal" method="post" ng-submit="addUser()" name="userForm" novalidate>
        <div class="container">
            <div class="row">
                <div class="form-group" ng-class="{'has-error': userForm.firstName.$touched && userForm.firstName.$invalid}">
                    <label class="control-label col-sm-2" for="firstName">First Name:</label>
                    <div class="col-sm-4">
                        <input type="text" class="form-control" id="firstName" name="firstName" ng-model="firstName" placeholder="First Name" required>
                    </div>  
                    <div class="help-block" ng-messages="userForm.firstName.$error" ng-show="userForm.firstName.$touched">
                        <div ng-messages-include="HTML/messages.html"></div>
                    </div>                
                </div>
                <div class="form-group" ng-class="{'has-error': userForm.lastName.$touched && userForm.lastName.$invalid}">
                    <label class="control-label col-sm-2" for="lastName">Last Name:</label>
                    <div class="col-sm-4">
                        <input type="text" class="form-control" id="lastName" name="lastName" ng-model="lastName" placeholder="Last Name" required>
                    </div>
                    <div class="help-block" ng-messages="userForm.lastName.$error" ng-show="userForm.lastName.$touched">
                        <div ng-messages-include="HTML/messages.html"></div>
                    </div> 
                </div>
                <div class="form-group" ng-class="{'has-error': userForm.identityNumber.$touched && userForm.identityNumber.$invalid}">
                    <label class="control-label col-sm-2" for="identityNumber">ID:</label>
                    <div class="col-sm-4">
                        <input type="text" class="form-control" id="identityNumber" name="identityNumber"
                                ng-model="identityNumber" placeholder="Identity Number"
                                identity required />
                    </div>
                    <div class="help-block" ng-messages="userForm.identityNumber.$error" ng-show="userForm.identityNumber.$touched">
                        <div ng-messages-include="HTML/messages.html"></div>
                    </div> 
                </div>
                <div class="form-group" ng-class="{'has-error': userForm.userName.$touched && userForm.userName.$invalid}">
                    <label class="control-label col-sm-2" for="userName">User Name:</label>
                    <div class="col-sm-4">
                        <input type="text" class="form-control" id="userName" name="userName"
                               ng-model-options="{ updateOn: 'blur' }"
                               ng-model="userName" placeholder="User Name" required unique
                               ng-minlength="4" ng-maxlength="10">                        
                    </div>
                    
                    <!--<span ng-if="userForm.userName.$pending">
                        Checking Username...
                    </span>
                    <span ng-show="userForm.userName.$loading">Loading...</span>-->

                    <div class="help-block" ng-messages="userForm.userName.$error" ng-show="userForm.userName.$touched">
                        <div ng-messages-include="HTML/messages.html"></div>
                    </div>                  
                </div>

                <div class="form-group" ng-class="{'has-error': userForm.password.$touched && userForm.password.$invalid}">
                    <label class="control-label col-sm-2" for="password">Password:</label>
                    <div class="col-sm-4">
                        <input type="password" class="form-control" id="password" name="password" ng-model="password" placeholder="Password" required
                               ng-minlength="4" ng-maxlength="10"  ng-pattern="/^(?=.*[A-Za-z])(?=.*\d)(?=.*[$@$!%*#?&])[A-Za-z\d$@$!%*#?&]{8,}$/">
                    </div>
                    <div class="help-block" ng-messages="userForm.password.$error" ng-show="userForm.password.$touched">
                        <div ng-messages-include="HTML/messages.html"></div>
                    </div> 
                </div>

                <div class="form-group" ng-class="{'has-error': userForm.email.$touched && userForm.email.$invalid}">
                    <label class="control-label col-sm-2" for="email">Email address:</label>
                    <div class="col-sm-4">
                        <input type="email" class="form-control" id="email" name="email" ng-model="email" placeholder="Email" required>
                    </div>
                    <div class="help-block" ng-messages="userForm.email.$error" ng-show="userForm.email.$touched">
                        <div ng-messages-include="HTML/messages.html"></div>
                    </div>
                </div>
                <div class="form-group"  ng-class="{'has-error': userForm.date.$touched && userForm.date.$invalid}">
                    <label class="control-label col-sm-2" for="birthDate">Birth Date:</label>
                    <div class="col-sm-4">   
                        <input class="form-control" id="date" ng-model="birthDate" name="date" placeholder="MM/DD/YYY" age required/>                   
                    </div>
                    <div class="help-block" ng-messages="userForm.date.$error" ng-show="userForm.date.$touched">
                        <div ng-messages-include="HTML/messages.html"></div>
                    </div>
                </div>

                <div class="form-group">
                    <div class="col-xs-10 col-xs-offset-2">
                        <button type="submit" name="submit" ng-disabled="userForm.$invalid|| userForm.$pending" class="btn btn-primary">Submit</button>
                    </div>
                </div>
            </div>
        </div>
      
    </form>
</section>
<div id="successModal" class="modal fade">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            </div>
            <div class="modal-body">
                <div class="alert alert-dismissible alert-success">
                    <strong>Success!</strong> You have successfully registered
                </div>
            </div>
        </div>
    </div>
</div>
<div id="errorModal" class="modal fade">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>

            </div>
            <div class="modal-body">
                <div class="alert alert-danger">
                    <strong>Error!</strong> Faild to register
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(document).ready(function () {
        var date_input = $('input[name="date"]'); //our date input has the name "date"
        var container = $('.bootstrap-iso form').length > 0 ? $('.bootstrap-iso form').parent() : "body";
        date_input.datepicker({
            format: 'mm/dd/yyyy',
            container: container,
            todayHighlight: true,
            autoclose: true,
            orientation: 'bottom'
        })
       
    })
</script>
